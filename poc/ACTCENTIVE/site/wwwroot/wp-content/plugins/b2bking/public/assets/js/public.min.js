!function(t){"use strict";t(document).ready((function(){t("body.theme-amedeo").on("click",".eltdf-quantity-minus",(function(n){let e=t(this).parent().find("input"),i=t(e).data("min"),_=t(e).data("step");t(e).val()-_<i&&(n.preventDefault(),n.stopPropagation())})),t("body.theme-riode").on("click",".quantity-plus",(function(n){let e=t(this).parent().find("input"),i=t(e).val();t(e).val(parseInt(i)-1),e[0].stepUp(1),t(e).trigger("input")})),t("body.theme-riode").on("click",".quantity-minus",(function(n){let e=t(this).parent().find("input"),i=t(e).val();t(e).val(parseInt(i)+1),e[0].stepDown(1),t(e).trigger("input")})),jQuery("body.theme-riode").on("click",".add_to_cart_button",(function(t){var n=jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).attr("data-quantity",n)})),jQuery("body.theme-riode").on("click",".d-icon-plus",(function(t){var n=jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).parent().parent().find(".add_to_cart_button").attr("data-quantity",n)})),jQuery("body.theme-riode").on("click",".d-icon-minus",(function(t){var n=jQuery(this).parent().find('input[name="quantity"]').val();jQuery(this).parent().parent().find(".add_to_cart_button").attr("data-quantity",n)}));var n=t("#b2bking_indigo_order_form").val();t("#b2bking_indigo_order_form.b2bking_cream_order_form").val();function e(){jQuery("#b2bking_request_custom_quote_button").attr("disabled",!0),jQuery("#b2bking_request_custom_quote_button").html(b2bking_display_settings.sending_please_wait)}function i(){if(1===parseInt(b2bking_display_settings.enable_registration_fields_checkout)){t(".b2bking_custom_registration_container").css("display","none"),t(".b2bking_custom_field_req_required").removeAttr("required"),t(".b2bking_custom_field_req_required select").removeAttr("required"),t(".b2bking_custom_field_req_required #billing_state").removeAttr("required"),t(".b2bking_custom_registration_allroles").css("display","block"),t(".b2bking_custom_registration_allroles .b2bking_custom_field_req_required").prop("required","true"),t(".b2bking_custom_registration_allroles .b2bking_custom_field_req_required select").prop("required","true"),setTimeout((function(){t(".b2bking_custom_registration_allroles .b2bking_custom_field_req_required #billing_state").prop("required","true")}),125);let n=t("#b2bking_registration_roles_dropdown").val();if(t(".b2bking_custom_registration_"+n).css("display","block"),t(".b2bking_custom_registration_"+n+" .b2bking_custom_field_req_required").prop("required","true"),t(".b2bking_custom_registration_"+n+" .b2bking_custom_field_req_required select").prop("required","true"),setTimeout((function(){t(".b2bking_custom_registration_"+n+" .b2bking_custom_field_req_required #billing_state").prop("required","true")}),225),1!==parseInt(b2bking_display_settings.number_of_countries)){let n=t("#b2bking_vat_number_registration_field_countries").val(),e=t(".b2bking_country_field_selector select").val();void 0===e&&(e=t("select#billing_country").val()),void 0!==n&&(n.includes(e)&&0!==e.trim().length||(t(".b2bking_vat_number_registration_field_container").css("display","none"),t("#b2bking_vat_number_registration_field").removeAttr("required")))}if(1===parseInt(b2bking_display_settings.myaccountloggedin)){let n=t("#b2bking_custom_billing_vat_countries_field input").prop("placeholder"),e=t("#billing_country").val();void 0!==n&&(n.includes(e)&&0!==e.trim().length?(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_visible"),t(".b2bking_vat_field_required_1 .optional").after('<abbr class="required" title="required">*</abbr>'),t(".b2bking_vat_field_required_1 .optional").remove(),t(".b2bking_vat_field_required_1 input").prop("required","true")):(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_hidden"),t(".b2bking_vat_field_required_1 input").removeAttr("required")))}}}function _(t,n,e){var i;if(e){var _=new Date;_.setTime(_.getTime()+24*e*60*60*parseFloat(b2bking_display_settings.cookie_expiration_days)),i="; expires="+_.toGMTString()}else i="";document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(n)+i+"; path=/"}function r(t){_(t,"",-1)}function o(){t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy').prop("checked")?t(".b2bking_checkbox_permission_approval").css("display","flex"):t(".b2bking_checkbox_permission_approval").css("display","none")}t(".b2bking_country_field_selector select").on("select2:open",(function(n){const e="scroll.select2";t(n.target).parents().off(e),t(window).off(e)})),t("#b2bking_conversation_messages_container").length&&t("#b2bking_conversation_messages_container").scrollTop(t("#b2bking_conversation_messages_container")[0].scrollHeight),t("body").on("click","#b2bking_conversation_message_submit",(function(){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_myaccount_conversation_endpoint_button_icon"),t(".b2bking_myaccount_conversation_endpoint_button_icon").remove();var n={action:"b2bkingconversationmessage",security:b2bking_display_settings.security,message:t("#b2bking_conversation_user_new_message").val(),conversationid:t("#b2bking_conversation_id").val()};t.post(b2bking_display_settings.ajaxurl,n,(function(t){location.reload()}))})),t("body").on("click","#b2bking_myaccount_make_inquiry_button",(function(){t("#b2bking_myaccount_make_inquiry_button").css("display","none"),t(".b2bking_myaccount_individual_conversation_container").css("display","none"),t(".b2bking_myaccount_conversations_pagination_container").css("display","none"),t(".b2bking_myaccount_new_conversation_container").css("display","block")})),t("body").on("click",".b2bking_myaccount_new_conversation_close",(function(){t(".b2bking_myaccount_new_conversation_container").css("display","none"),t("#b2bking_myaccount_make_inquiry_button").css("display","inline-flex"),t(".b2bking_myaccount_individual_conversation_container").css("display","block"),t(".b2bking_myaccount_conversations_pagination_container").css("display","flex")})),t("body").on("click","#b2bking_myaccount_send_inquiry_button",(function(){if(t.trim(t("#b2bking_myaccount_textarea_conversation_start").val())&&t.trim(t("#b2bking_myaccount_title_conversation_start").val())){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_myaccount_start_conversation_button_icon"),t(".b2bking_myaccount_start_conversation_button_icon").remove();var n={action:"b2bkingsendinquiry",security:b2bking_display_settings.security,message:t("#b2bking_myaccount_textarea_conversation_start").val(),title:t("#b2bking_myaccount_title_conversation_start").val(),type:t("#b2bking_myaccount_conversation_type").children("option:selected").val()};"undefined"!=typeof b2bkingdokan_display_settings&&(n.vendor=t("#b2bking_myaccount_conversation_vendor").val()),"undefined"!=typeof b2bkingwcfm_display_settings&&(n.vendor=t("#b2bking_myaccount_conversation_vendor").val()),"undefined"!=typeof marketking_display_settings&&(n.vendor=t("#b2bking_myaccount_conversation_vendor").val()),t.post(b2bking_display_settings.ajaxurl,n,(function(t){window.location=t}))}else;})),t("body").on("click","#b2bking_request_custom_quote_button",(function(){if("undefined"!=typeof b2bkingdokan_display_settings){var n=[];t(".variation dd.variation-Vendor").each((function(){let e=t(this).text().trim();0!==e.length&&(n.includes(e)||n.push(e))}));var e=n.length;if(parseInt(e)>1)return void alert(b2bkingdokan_display_settings.request_many_vendors)}if("undefined"!=typeof b2bkingwcfm_display_settings){n=[];t(".variation dd.variation-Store").each((function(){let e=t(this).text().trim();0!==e.length&&(n.includes(e)||n.push(e))})),0==n.length&&t(".wcfm_dashboard_item_title").each((function(){let e=t(this).text().trim();0!==e.length&&(n.includes(e)||n.push(e))}));e=n.length;if(parseInt(e)>1)return void alert(b2bkingwcfm_display_settings.request_many_vendors)}if("undefined"!=typeof marketking_display_settings){e=t("#marketking_number_vendors_cart").val();if(parseInt(e)>1)return void alert(marketking_display_settings.request_many_vendors)}t("#b2bking_request_custom_quote_textarea, #b2bking_request_custom_quote_textarea_abovetext, .b2bking_custom_quote_field_container, .b2bking_request_custom_quote_text_label, #b2bking_request_custom_quote_name, #b2bking_request_custom_quote_email, .b2bking_custom_quote_field").css("display","block"),t("#b2bking_request_custom_quote_button").text(b2bking_display_settings.send_quote_request),t("#b2bking_request_custom_quote_button").addClass("b2bking_send_custom_quote_button"),t("#b2bking_request_custom_quote_button").removeClass("b2bking_button_quote_shortcode")})),t("body").on("click",".b2bking_send_custom_quote_button",(function(){var n="standard";t(this).hasClass("b2bking_shortcode_send")&&(n="shortcode");let i="no";if(""!==t("#b2bking_request_custom_quote_name").val()&&""!==t("#b2bking_request_custom_quote_email").val()||(i="yes"),jQuery("#b2bking_quote_required_ids").val().split(",").forEach((function(n){""===t("#b2bking_field_"+n).val()&&(i="yes")})),"no"===i)if(d=t("#b2bking_request_custom_quote_email").val(),void 0===t("#b2bking_request_custom_quote_email").val()||/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(d)){var _=jQuery("#b2bking_quote_text_ids").val(),r=jQuery("#b2bking_quote_checkbox_ids").val(),o=jQuery("#b2bking_quote_file_ids").val();let i=_.split(","),d=r.split(","),u=o.split(",");var a={action:"b2bkingrequestquotecart",security:b2bking_display_settings.security,message:jQuery("#b2bking_request_custom_quote_textarea").val(),name:jQuery("#b2bking_request_custom_quote_name").val(),email:jQuery("#b2bking_request_custom_quote_email").val(),title:b2bking_display_settings.custom_quote_request,location:n,type:"quote"};if(a.quotetextids=_,a.quotecheckboxids=r,a.quotefileids=o,i.forEach((function(t){a["b2bking_field_"+t]=jQuery("#b2bking_field_"+t).val()})),d.forEach((function(t){let n="b2bking_field_"+t,e="";jQuery("#b2bking_field_"+t+":checked").each((function(){e+=jQuery(this).parent().find("span").text()+", "})),e=e.slice(0,-2),a[n]=e})),""!==o){var s=parseInt(u.length),b=1;b<=s&&u.forEach((function(i,_,r){let o="b2bking_field_"+i;var c=new FormData,l=jQuery("#b2bking_field_"+i)[0].files[0];c.append("file",l),c.append("action","b2bkingquoteupload"),c.append("security",b2bking_display_settings.security),e(),jQuery.ajax({type:"POST",url:b2bking_display_settings.ajaxurl,data:c,contentType:!1,processData:!1,success:function(e){if(a[o]=e,b===s){if("undefined"!=typeof marketking_display_settings&&(a.vendor=t("#marketking_cart_vendor").val()),"undefined"!=typeof b2bkingdokan_display_settings){var i=[];t(".variation dd.variation-Vendor").each((function(){let n=t(this).text();i.includes(n)||i.push(n)})),a.vendor=i[0]}if("undefined"!=typeof b2bkingwcfm_display_settings){i=[];t(".variation dd.variation-Store").each((function(){let n=t(this).text();i.includes(n)||i.push(n)})),a.vendor=i[0]}if(void 0===a.vendor){var _=[];t(".wcfm_dashboard_item_title").each((function(){let n=t(this).text();_.includes(n)||_.push(n)})),a.vendor=_[0]}t.post(b2bking_display_settings.ajaxurl,a,(function(e){let i=e;t("#b2bking_request_custom_quote_name").length?(alert(b2bking_display_settings.quote_request_success),t("#b2bking_request_custom_quote_button").css("display","none"),n.reload()):window.location=i}))}b++}})}))}else{if("undefined"!=typeof b2bkingwcfm_display_settings){var c=[];t(".variation dd.variation-Store").each((function(){let n=t(this).text();c.includes(n)||c.push(n)})),a.vendor=c[0]}var l=[];if(t(".wcfm_dashboard_item_title").each((function(){let n=t(this).text();l.includes(n)||l.push(n)})),a.vendor=l[0],"undefined"!=typeof marketking_display_settings&&(a.vendor=t("#marketking_cart_vendor").val()),"undefined"!=typeof b2bkingdokan_display_settings){c=[];t(".variation dd.variation-Vendor").each((function(){let n=t(this).text();c.includes(n)||c.push(n)})),a.vendor=c[0]}e(),t.post(b2bking_display_settings.ajaxurl,a,(function(e){let i=e;t("#b2bking_request_custom_quote_name").length||1===parseInt(b2bking_display_settings.quote_without_message)?(alert(b2bking_display_settings.quote_request_success),t("#b2bking_request_custom_quote_button").css("display","none"),n.reload()):window.location=i}))}}else alert(b2bking_display_settings.quote_request_invalid_email);else alert(b2bking_display_settings.quote_request_empty_fields);var d})),t("body").on("click",".b2bking_offer_add",(function(){if(1!==b2bking_display_settings.disableofferadd){let e=t(this).val();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(t(this).find(".b2bking_myaccount_individual_offer_bottom_line_button_icon")),t(this).find(".b2bking_myaccount_individual_offer_bottom_line_button_icon").remove();var n={action:"b2bkingaddoffer",security:b2bking_display_settings.security,offer:e};t.post(b2bking_display_settings.ajaxurl,n,(function(t){window.location=b2bking_display_settings.carturl}))}})),t("body").on("click",".b2bking_offer_download",(function(){var n=b2bking_display_settings.offers_logo,e=t(this).parent().parent().parent().find("#b2bking_offer_id").val();let i=jQuery("#b2bking_img_logo").attr("data-src");void 0!==i&&""!==i&&jQuery("#b2bking_img_logo").attr("src",i),jQuery(".b2bking_hidden_img").each((function(t){let n=jQuery(this).attr("data-src");void 0!==n&&""!==n&&jQuery(this).attr("src",n)}));var _=document.getElementById("b2bking_img_logo"),r=document.createElement("canvas");r.width=_.width,r.height=_.height,r.getContext("2d").drawImage(_,0,0);var o=r.toDataURL("image/png"),a=[],s=0;if(1===parseInt(b2bking_display_settings.offers_images_setting)){t(this).parent().parent().parent().find(".b2bking_offers_thumbnails_str").val().split("|").forEach((function(t){if("no"!==t){var n="b2bking_img_logo"+s+e,i=document.getElementById(n),_=document.createElement("canvas");_.width=i.width,_.height=i.height,_.getContext("2d").drawImage(i,0,0);let t=_.toDataURL("image/png");s++,a.push(t)}else a.push("no")}))}s=0;var b=t(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_custom_text").text();b=b.replace("\t","").trim();var c=t(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_custom_text_vendor").text();c=c.replace("\t","").trim();var l=b2bking_display_settings.offer_custom_text;0===b.length&&0===c.length&&(l="");var d=[];d.push([{text:b2bking_display_settings.item_name,style:"tableHeader",margin:[7,7,7,7]},{text:b2bking_display_settings.item_quantity,style:"tableHeader",margin:[7,7,7,7]},{text:b2bking_display_settings.unit_price,style:"tableHeader",margin:[7,7,7,7]},{text:b2bking_display_settings.item_subtotal,style:"tableHeader",margin:[7,7,7,7]}]),jQuery(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_element_line").each((function(t){let n=[];1===parseInt(b2bking_display_settings.offers_images_setting)?("no"!==a[s]?n.push([{text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item_name").first().text(),margin:[7,7,7,7]},{image:a[s],width:40,margin:[15,5,5,5]}]):n.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item_name").first().text(),margin:[7,7,7,7]}),s++):n.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item_name").first().text(),margin:[7,7,7,7]}),n.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item:nth-child(2)").text(),margin:[7,7,7,7]}),n.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item:nth-child(3)").text(),margin:[7,7,7,7]}),n.push({text:jQuery(this).find(".b2bking_myaccount_individual_offer_element_line_item:nth-child(4)").text(),margin:[7,7,7,7]}),d.push(n)})),d.push(["","",{text:b2bking_display_settings.offer_total+": ",margin:[7,7,7,7],bold:!0},{text:jQuery(this).parent().parent().parent().find(".b2bking_myaccount_individual_offer_bottom_line_total strong").text(),margin:[7,7,7,7],bold:!0}]);let u={image:o,width:parseInt(b2bking_display_settings.offerlogowidth),margin:[0,parseInt(b2bking_display_settings.offerlogotopmargin),0,30]};var g=[{text:b2bking_display_settings.offer_details,fontSize:14,bold:!0,margin:[0,20,0,20]},{style:"tableExample",table:{headerRows:1,widths:["*","*","*","*"],body:d},layout:"lightHorizontalLines"},{text:b2bking_display_settings.offer_go_to,link:b2bking_display_settings.offers_endpoint_link,decoration:"underline",fontSize:13,bold:!0,margin:[0,20,40,8],alignment:"right"},{text:l,fontSize:14,bold:!0,margin:[0,50,0,8]},{text:c,fontSize:12,bold:!1,margin:[0,8,0,8]},{text:b,fontSize:12,bold:!1,margin:[0,8,0,8]}],k=b2bking_display_settings.mention_offer_requester,p=b2bking_display_settings.custom_content_after_logo_left_1,f=b2bking_display_settings.custom_content_after_logo_left_2,m=b2bking_display_settings.custom_content_after_logo_center_1,y=b2bking_display_settings.custom_content_after_logo_center_2;if(0!==p.length){let t={text:p,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"left"};g.unshift(t)}if(0!==k.length){let t={text:k+jQuery(this).data("customer"),fontSize:14,bold:!0,margin:[0,12,0,12],alignment:"left"};g.unshift(t)}if(0!==f.length){let t={text:f,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"left"};g.unshift(t)}if(0!==m.length){let t={text:m,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"center"};g.unshift(t)}if(0!==y.length){let t={text:y,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"center"};g.unshift(t)}0!==n.length&&g.unshift(u);var v=b2bking_display_settings.custom_content_center_1,h=b2bking_display_settings.custom_content_center_2,x=b2bking_display_settings.custom_content_left_1,q=b2bking_display_settings.custom_content_left_2;if(0!==v.length){let t={text:v,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"center"};g.unshift(t)}if(0!==h.length){let t={text:h,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"center"};g.unshift(t)}if(0!==x.length){let t={text:x,fontSize:12,bold:!0,margin:[0,0,0,20],alignment:"left"};g.unshift(t)}if(0!==q.length){let t={text:q,fontSize:12,bold:!0,margin:[0,12,0,12],alignment:"left"};g.unshift(t)}var w={content:g};"thai"===b2bking_display_settings.pdf_download_lang&&(pdfMake.fonts={THSarabunNew:{normal:"THSarabunNew.ttf",bold:"THSarabunNew-Bold.ttf",italics:"THSarabunNew-Italic.ttf",bolditalics:"THSarabunNew-BoldItalic.ttf"}},w={content:g,defaultStyle:{font:"THSarabunNew"}}),"japanese"===b2bking_display_settings.pdf_download_lang&&(pdfMake.fonts={Noto:{normal:"Noto.ttf",bold:"Noto.ttf",italics:"Noto.ttf",bolditalics:"Noto.ttf"}},w={content:g,defaultStyle:{font:"Noto"}}),"standard"!==b2bking_display_settings.pdf_download_font&&(pdfMake.fonts={Customfont:{normal:b2bking_display_settings.pdf_download_font,bold:b2bking_display_settings.pdf_download_font,italics:b2bking_display_settings.pdf_download_font,bolditalics:b2bking_display_settings.pdf_download_font}},w={content:g,defaultStyle:{font:"Customfont"}}),pdfMake.createPdf(w).download(b2bking_display_settings.offer_file_name+".pdf")})),t(".b2bking_country_field_req_required").prop("required","true"),t(".b2bking_custom_field_req_required select").prop("required","true"),i(),1===parseInt(b2bking_display_settings.enable_registration_fields_checkout)&&(t(".country_to_state").trigger("change"),t("#b2bking_registration_roles_dropdown").change(i),t(".b2bking_country_field_selector select").change(i),t("select#billing_country").change(i)),t("#billing_country").on("change",(function(){setTimeout((function(){t(document.body).trigger("update_checkout")}),1750)})),jQuery("body").on("change",'input[name="payment_method"]',(function(){1===parseInt(b2bking_display_settings.enable_payment_method_change_refresh)&&setTimeout((function(){jQuery(document.body).trigger("update_checkout")}),250)})),t(document).on("updated_checkout",(function(){let n=t("#b2bking_custom_billing_vat_countries_field input").val(),e=t("#billing_country").val();void 0!==n&&(n.includes(e)&&0!==e.trim().length?(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_visible"),t(".b2bking_vat_field_required_1 .optional").after('<abbr class="required" title="required">*</abbr>'),t(".b2bking_vat_field_required_1 .optional").remove(),t(".b2bking_vat_field_required_1 input").prop("required","true")):(t(".b2bking_vat_field_container, #b2bking_checkout_registration_validate_vat_button").removeClass("b2bking_vat_visible, b2bking_vat_hidden").addClass("b2bking_vat_hidden"),t(".b2bking_vat_field_required_1 input").removeAttr("required")))})),t("body").on("click","#b2bking_checkout_registration_validate_vat_button",(function(){t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.validating);var n=t("#b2bking_vat_number_registration_field").val();n=void 0===n?t('.b2bking_vat_field_container input[type="text"]').val().trim():t("#b2bking_vat_number_registration_field").val().trim();var e={action:"b2bkingvalidatevat",security:b2bking_display_settings.security,vat:n,country:t("#billing_country").val()};t.post(b2bking_display_settings.ajaxurl,e,(function(e){"valid"===e?(_("b2bking_validated_vat_status","validated_vat",!1),_("b2bking_validated_vat_number",n,!1),t("#b2bking_vat_number_registration_field").prop("readonly",!0),t("#b2bking_checkout_registration_validate_vat_button").prop("disabled",!0),t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.vatvalid),t(document.body).trigger("update_checkout")):"invalid"===e&&(r("b2bking_validated_vat_status"),t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.vatinvalid))}))})),t(".woocommerce-checkout #billing_country").change((function(){r("b2bking_validated_vat_status"),t("#b2bking_checkout_registration_validate_vat_button").text(b2bking_display_settings.validatevat),t("#b2bking_vat_number_registration_field").prop("readonly",!1),t("#b2bking_vat_number_registration_field").val(""),t("#b2bking_checkout_registration_validate_vat_button").prop("disabled",!1),t(document.body).trigger("update_checkout")})),1===parseInt(b2bking_display_settings.differentdeliverycountrysetting)&&t("#shipping_country").change((function(){var n={action:"b2bkingcheckdeliverycountryvat",security:b2bking_display_settings.security,deliverycountry:t("#shipping_country").val()};t.post(b2bking_display_settings.ajaxurl,n,(function(n){setTimeout((function(){t(document.body).trigger("update_checkout")}),250)}))})),0===parseInt(b2bking_display_settings.disable_checkout_required_validation)&&jQuery((function(t){t("form.woocommerce-checkout").on("click","#place_order",(function(n){var e="no",i=t(".b2bking_custom_field_req_required");t.each(i,(function(n,i){if("none"!==t(i).css("display")&&"none"!==t(i).parent().parent().css("display")&&"none"!==t(i).parent().css("display")&&(!i.value||"checkbox"===i.type)){let n=t(i).parent().find("label").text().slice(0,-2);if(""===n){let n=t(i).parent().parent().find("label").text().slice(0,-2);alert(n+" "+b2bking_display_settings.is_required)}else alert(n+" "+b2bking_display_settings.is_required);e="yes"}})),"yes"===e?(n.preventDefault(),t("#b2bking_js_based_invalid").val("invalid")):t("#b2bking_js_based_invalid").val("0")}))})),t("button.woocommerce-form-register__submit").on("click",(function(n){"none"!==t(".b2bking_country_field_selector").parent().css("display")&&"default"===t(".b2bking_country_field_selector select").val()&&(n.preventDefault(),alert(b2bking_display_settings.must_select_country))})),t("body").on("click",".b2bking_subaccounts_container_top_button",(function(){t(".b2bking_subaccounts_new_account_container").css("display","block"),t(".b2bking_subaccounts_account_container").css("display","none"),t(".b2bking_subaccounts_container_top_button").css("display","none")})),t("body").on("click",".b2bking_subaccounts_new_account_container_top_close",(function(){t(".b2bking_subaccounts_new_account_container").css("display","none"),t(".b2bking_subaccounts_account_container").css("display","block"),t(".b2bking_subaccounts_container_top_button").css("display","inline-flex")})),t("body").on("click",".b2bking_subaccounts_new_account_container_content_bottom_button",(function(){t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html("");let n="",e=123;0===parseInt(b2bking_display_settings.disable_username_subaccounts)&&(e=t('input[name="b2bking_subaccounts_new_account_username"]').val().trim());let i=t('input[name="b2bking_subaccounts_new_account_email_address"]').val().trim(),_=t('input[name="b2bking_subaccounts_new_account_password"]').val().trim();if(0===parseInt(b2bking_display_settings.disable_username_subaccounts)&&!1===/^(?!.*[_.]$)(?=.{8,30}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._-\d@]+$/.test(e)&&(n+=b2bking_display_settings.newSubaccountUsernameError),!1===/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)&&(n+=b2bking_display_settings.newSubaccountEmailError),!1===/^(?=.*[A-Za-z])(?=.*[\d]).{8,}$/.test(_)&&(n+=b2bking_display_settings.newSubaccountPasswordError),""!==n)t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html(n);else{let n=t('input[name="b2bking_subaccounts_new_account_name"]').val().trim(),a=t('input[name="b2bking_subaccounts_new_account_last_name"]').val().trim(),s=t('input[name="b2bking_subaccounts_new_account_job_title"]').val().trim(),b=t('input[name="b2bking_subaccounts_new_account_phone_number"]').val().trim(),c=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy"]').prop("checked"),l=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy_approval"]').prop("checked"),d=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_orders"]').prop("checked"),u=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_subscriptions"]').prop("checked"),g=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_offers"]').prop("checked"),k=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_conversations"]').prop("checked"),p=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_lists"]').prop("checked");var r=t(".b2bking_subaccounts_new_account_container_content_bottom_button").html();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_subaccounts_new_account_container_content_bottom_button_icon"),t(".b2bking_subaccounts_new_account_container_content_bottom_button_icon").remove();var o={action:"b2bking_create_subaccount",security:b2bking_display_settings.security,username:e,password:_,name:n,lastName:a,jobTitle:s,email:i,phone:b,permissionBuy:c,permissionBuyApproval:l,permissionViewOrders:d,permissionViewSubscriptions:u,permissionViewOffers:g,permissionViewConversations:k,permissionViewLists:p};jQuery("#b2bking_custom_new_subaccount_fields").val().split(";").forEach((function(t){let n=jQuery('input[name="'+t+'"]').val();o[t]=n})),t.post(b2bking_display_settings.ajaxurl,o,(function(n){n.startsWith("error")?(console.log(n),t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html(b2bking_display_settings.newSubaccountAccountError+" "+n.substring(5)),t(".b2bking_subaccounts_new_account_container_content_bottom_button").html(r)):"error_maximum_subaccounts"===n?(t(".b2bking_subaccounts_new_account_container_content_bottom_validation_errors").html(b2bking_display_settings.newSubaccountMaximumSubaccountsError),t(".b2bking_subaccounts_new_account_container_content_bottom_button").html(r)):window.location=b2bking_display_settings.subaccountsurl}))}})),t("body").on("click",".b2bking_subaccounts_edit_account_container_content_bottom_button",(function(){let n=t(".b2bking_subaccounts_edit_account_container_content_bottom_button").val().trim(),e=t('input[name="b2bking_subaccounts_new_account_name"]').val().trim(),i=t('input[name="b2bking_subaccounts_new_account_last_name"]').val().trim(),_=t('input[name="b2bking_subaccounts_new_account_job_title"]').val().trim(),r=t('input[name="b2bking_subaccounts_new_account_phone_number"]').val().trim(),o=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy"]').prop("checked"),a=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy_approval"]').prop("checked"),s=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_orders"]').prop("checked"),b=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_subscriptions"]').prop("checked"),c=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_offers"]').prop("checked"),l=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_conversations"]').prop("checked"),d=t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_view_lists"]').prop("checked");t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_subaccounts_edit_account_container_content_bottom_button .b2bking_subaccounts_new_account_container_content_bottom_button_icon"),t(".b2bking_subaccounts_edit_account_container_content_bottom_button .b2bking_subaccounts_new_account_container_content_bottom_button_icon").remove();var u={action:"b2bking_update_subaccount",security:b2bking_display_settings.security,subaccountId:n,name:e,lastName:i,jobTitle:_,phone:r,permissionBuy:o,permissionBuyApproval:a,permissionViewOrders:s,permissionViewSubscriptions:b,permissionViewOffers:c,permissionViewConversations:l,permissionViewLists:d};jQuery("#b2bking_custom_new_subaccount_fields").val().split(";").forEach((function(t){let n=jQuery('input[name="'+t+'"]').val();u[t]=n})),t.post(b2bking_display_settings.ajaxurl,u,(function(t){window.location=b2bking_display_settings.subaccountsurl}))})),t(".b2bking_subaccounts_edit_account_container_top_close").on("click",(function(){window.location=b2bking_display_settings.subaccountsurl})),t(".b2bking_subaccounts_edit_account_container_content_bottom_button_delete").on("click",(function(){if(confirm(b2bking_display_settings.are_you_sure_delete)){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_subaccounts_edit_account_container_content_bottom_button_delete .b2bking_subaccounts_new_account_container_content_bottom_button_icon"),t(".b2bking_subaccounts_edit_account_container_content_bottom_button_delete .b2bking_subaccounts_new_account_container_content_bottom_button_icon").remove();var n={action:"b2bkingrejectuser",security:b2bking_display_settings.security,user:t(".b2bking_subaccounts_edit_account_container_content_bottom_button").val().trim(),issubaccount:"yes"};t.post(b2bking_display_settings.ajaxurl,n,(function(t){window.location=b2bking_display_settings.subaccountsurl}))}})),o(),t('input[name="b2bking_subaccounts_new_account_container_content_element_checkbox_buy').on("change",o),t("#b2bking_approve_order").on("click",(function(){let n=t("#b2bking_order_number").val();if(confirm(b2bking_display_settings.approve_order_confirm)){var e={action:"b2bking_approve_order",security:b2bking_display_settings.security,orderid:n};t.post(b2bking_display_settings.ajaxurl,e,(function(n){0===parseInt(b2bking_display_settings.approve_order_redirect_payment)?location.reload():window.location=t("#b2bking_pay_now_url").val()}))}})),t("#b2bking_reject_order").on("click",(function(){let n=t("#b2bking_order_number").val();if(confirm(b2bking_display_settings.reject_order_confirm)){var e=window.prompt(b2bking_display_settings.reject_order_email,""),i={action:"b2bking_reject_order",security:b2bking_display_settings.security,orderid:n,reason:e};t.post(b2bking_display_settings.ajaxurl,i,(function(t){location.reload()}))}})),t("#b2bking_reject_order_subaccount").on("click",(function(){let n=t("#b2bking_order_number").val();if(confirm(b2bking_display_settings.cancel_order_confirm)){var e={action:"b2bking_reject_order",security:b2bking_display_settings.security,orderid:n,reason:""};t.post(b2bking_display_settings.ajaxurl,e,(function(t){location.reload()}))}})),t("body").on("click",".b2bking_bulkorder_cream_name select",(function(t){t.preventDefault(),t.stopPropagation()})),t("body").on("input",".b2bking_bulkorder_form_container_content_line_qty_indigo",(function(n){let e=parseInt(t(this).val()),i=parseInt(t(this).attr("min")),_=parseInt(t(this).attr("max"));e<i?t(this).val(i):e>_&&t(this).val(_)}));var a=b2bking_display_settings.currency_symbol+"0";1===parseInt(b2bking_display_settings.accountingsubtotals)&&(a=b2bking_display_settings.price0),1===parseInt(b2bking_display_settings.quotes_enabled)&&(a=b2bking_display_settings.quote_text),t(".b2bking_bulkorder_form_container_newline_button").on("click",(function(){var n=t(".b2bking_bulkorder_form_newline_template").html();n=(n=n.replace("pricetext",a)).replace("display:none","display:initial"),t(".b2bking_bulkorder_form_container_newline_container").before(n)})),t(".b2bking_bulkorder_form_container_bottom_save_button").on("click",(function(){let n=window.prompt(b2bking_display_settings.save_list_name,"");if(""!==n&&null!==n){let _="";if(document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach((function(n){var e=t(n).attr("class").split(/\s+/);t.each(e,(function(e,i){if(i.includes("b2bking_selected_product_id_")){let e=i.split("_")[4],r=t(n).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();(r>0||1===parseInt(b2bking_display_settings.lists_zero_qty))&&(_+=e+":"+r+"|")}}))})),""!==_){var e=t(".b2bking_bulkorder_form_container_bottom_save_button").html();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_save_button_icon"),t(".b2bking_bulkorder_form_container_bottom_save_button_icon").remove();let r="";Object.entries(l).forEach((function(t){let n=t[0],e=t[1],i=n.split("B2BKINGPRICE")[0];r+=i+":"+e+"|"}));var i={action:"b2bking_bulkorder_save_list",security:b2bking_display_settings.security,productstring:_,title:n,pricelist:r};t.post(b2bking_display_settings.ajaxurl,i,(function(n){t(".b2bking_bulkorder_form_container_bottom_save_button").html(e),alert(b2bking_display_settings.list_saved)}))}else alert(b2bking_display_settings.list_empty)}}));var s=!1;if(jQuery(".b2bking_bulkorder_container_final").length>1){Date.now();s=!0,setTimeout((function(){s=!1}),5e3)}var b=Date.now();t("body").on("input",".b2bking_bulkorder_form_container_content_line_qty",(function(n){let e=t(this).val();e%1!=0&&t(this).val(parseInt(e))})),t("body").on("input",".b2bking_bulkorder_form_container_content_line_product",(function(){let n=Date.now();b=n;let e=t(this).parent(),i=t(this).val(),_=t("#b2bking_bulkorder_searchby_select").val();void 0===_&&(_="productname"),e.find(".b2bking_bulkorder_form_container_content_line_livesearch").html('<img class="b2bking_loader_img" src="'+b2bking_display_settings.loaderurl+'">'),e.find(".b2bking_bulkorder_form_container_content_line_livesearch").css("display","block");var r=t(".b2bking_bulkorder_exclude").val(),o=t(".b2bking_bulkorder_product_list").val(),a=t(this).parent().parent().parent().parent().find(".b2bking_bulkorder_category").val(),c=t(".b2bking_bulkorder_sortby").val();i.length>0?setTimeout((function(){if(n===b||s){let x=(h=[],document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach((function(n){var e=t(n).attr("class").split(/\s+/);t.each(e,(function(t,n){if(n.includes("b2bking_selected_product_id_")){let t=n.split("_")[4];h.push(t)}}))})),h);i=i.trim();var v={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:i,exclude:r,productlist:o,category:a,sortby:c,searchby:_,idsinform:JSON.stringify(x),dataType:"json"};t.post(b2bking_display_settings.ajaxurl,v,(function(t){let i="",_=t;if(n===b||s){if(1234!==parseInt(_)){let t=JSON.parse(_);Object.keys(t).forEach((function(n){if(n.includes("B2BKINGPRICE"))l[n]=t[n];else if(n.includes("B2BTIERPRICE"))u[n]=t[n];else if(n.includes("B2BKINGSTOCK"))d[n]=t[n];else if(n.includes("B2BKINGIMAGE"))k[n]=t[n];else if(n.includes("B2BKINGMIN"))p[n]=t[n];else if(n.includes("B2BKINGMAX"))f[n]=t[n];else if(n.includes("B2BKINGSTEP"))m[n]=t[n];else if(n.includes("B2BKINGVAL"))y[n]=t[n];else if(n.includes("B2BKINGURL"))g[n]=t[n];else if(1===parseInt(b2bking_display_settings.bulkorderformimages)){let e=n+"B2BKINGIMAGE";"no"!==t[e]&&""!==t[e]&&null!==t[e]?i+='<div class="b2bking_livesearch_product_result productid_'+n+'">'+t[n]+'<img class="b2bking_livesearch_image" src="'+t[e]+'"></div>':i+='<div class="b2bking_livesearch_product_result productid_'+n+'">'+t[n]+"</div>"}else i+='<div class="b2bking_livesearch_product_result productid_'+n+'">'+t[n]+"</div>"}))}else i='<span class="b2bking_classic_noproducts_found">'+b2bking_display_settings.no_products_found+"</span>";e.find(".b2bking_bulkorder_form_container_content_line_livesearch").html(i)}}))}var h}),600):e.find(".b2bking_bulkorder_form_container_content_line_livesearch").css("display","none")}));var c,l=Object,d=Object,u=Object,g=Object,k=Object,p=Object,f=Object,m=Object,y=Object,v="yes";let h=t("#b2bking_initial_prices").val();if(void 0!==h){h.split("|").forEach((function(t){let n=t.split("-");""!==n[0]&&(l[n[0]+"B2BKINGPRICE"]=parseFloat(n[1]),u[n[0]+"B2BTIERPRICE"]=n[2],d[n[0]+"B2BKINGSTOCK"]=parseInt(n[3]))}))}function x(){let e=0,i=c.find(".b2bking_bulkorder_form_container_content_line_product");var _=t(i).attr("class").split(/\s+/);if(t.each(_,(function(e,_){if(_.includes("b2bking_selected_product_id_")){let n=_.split("_")[4],e=t(i).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();if(e>0){let _=parseFloat(l[n+"B2BKINGPRICE"]),r=u[n+"B2BTIERPRICE"];if(0!==r){let i=e;if(void 0!==b2bking_display_settings.cart_quantities[n]){let t=parseInt(b2bking_display_settings.cart_quantities[n]);i=parseInt(e)+t}0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(i=parseInt(i)+parseInt(b2bking_display_settings.cart_quantities_cartqty));let o=r.split(";"),a=[],s=[];if(t.each(o,(function(t,n){let e=n.split(":");e[0]=parseInt(e[0]);var _=e[1];void 0!==_&&(_=_.toString().replace(",",".")),e[1]=parseFloat(_),e[0]<=i&&(a.push(e[0]),s[e[0]]=e[1])})),a.length>0){let t=Math.max(...a),n=s[t];_>n&&(_=n)}}let o=_*e;o=parseFloat(o.toFixed(2)),setTimeout((function(){if(1===parseInt(b2bking_display_settings.accountingsubtotals)){var n={action:"b2bking_accountingsubtotals",security:b2bking_display_settings.security,pricesent:o};t.post(b2bking_display_settings.ajaxurl,n,(function(n){t(i).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").html(n)}))}else t(i).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").text(b2bking_display_settings.currency_symbol+o)}),100)}else t(i).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").text(b2bking_display_settings.currency_symbol+0)}else void 0===n&&""===t(i).val()&&t(i).parent().find(".b2bking_bulkorder_form_container_content_line_subtotal").text(b2bking_display_settings.currency_symbol+0)})),document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach((function(n){var i=t(n).attr("class").split(/\s+/);t.each(i,(function(i,_){if(_.includes("b2bking_selected_product_id_")){let i=_.split("_")[4],r=t(n).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();if(r>0){let n=parseFloat(l[i+"B2BKINGPRICE"]),_=u[i+"B2BTIERPRICE"];if(0!==_){let e=r;if(void 0!==b2bking_display_settings.cart_quantities[i]){let t=parseInt(b2bking_display_settings.cart_quantities[i]);e=parseInt(r)+t}0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(e=parseInt(r)+parseInt(b2bking_display_settings.cart_quantities_cartqty));let o=_.split(";"),a=[],s=[];if(t.each(o,(function(t,n){let i=n.split(":");i[0]=parseInt(i[0]);var _=i[1];void 0!==_&&(_=_.toString().replace(",",".")),i[1]=parseFloat(_),i[0]<=e&&(a.push(i[0]),s[i[0]]=i[1])})),a.length>0){let t=Math.max(...a),e=s[t];n>e&&(n=e)}}let o=n*r;o=parseFloat(o.toFixed(2)),e+=o,e=parseFloat(e.toFixed(2))}}}))})),1===parseInt(b2bking_display_settings.accountingsubtotals)){var r={action:"b2bking_accountingsubtotals",security:b2bking_display_settings.security,pricesent:e};t.post(b2bking_display_settings.ajaxurl,r,(function(n){t(".b2bking_bulkorder_form_container_bottom_total .woocommerce-Price-amount").html(n)}))}else t(".b2bking_bulkorder_form_container_bottom_total .woocommerce-Price-amount").text(b2bking_display_settings.currency_symbol+e)}if(t("body").on("click",".b2bking_livesearch_product_result",(function(){let n=t(this).text(),e=t(this).parent().parent();c=e;var i=t(this).attr("class").split(/\s+/);t.each(i,(function(t,i){if(i.includes("productid")){let t=i.split("_")[1];e.find(".b2bking_bulkorder_form_container_content_line_product").val(n),e.find(".b2bking_bulkorder_form_container_content_line_product").css("color",b2bking_display_settings.colorsetting),e.find(".b2bking_bulkorder_form_container_content_line_product").css("font-weight","bold"),e.find(".b2bking_bulkorder_form_container_content_line_product").addClass("b2bking_selected_product_id_"+t),e.find(".b2bking_bulkorder_form_container_content_line_product").after('<button class="b2bking_bulkorder_clear">'+b2bking_display_settings.clearx+"</button>"),e.find(".b2bking_bulkorder_form_container_content_line_qty").val(1),setTimeout((function(){e.find(".b2bking_bulkorder_form_container_content_line_product").prop("readonly",!0),e.find(".b2bking_bulkorder_form_container_content_line_livesearch").css("display","none")}),125),null!==d[t+"B2BKINGSTOCK"]&&e.find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",d[t+"B2BKINGSTOCK"]),null!==d[t+"B2BKINGMIN"]&&e.find(".b2bking_bulkorder_form_container_content_line_qty").attr("min",d[t+"B2BKINGMIN"]),null!==d[t+"B2BKINGSTEP"]&&e.find(".b2bking_bulkorder_form_container_content_line_qty").attr("step",d[t+"B2BKINGSTEP"]),null!==d[t+"B2BKINGVAL"]&&e.find(".b2bking_bulkorder_form_container_content_line_qty").val(d[t+"B2BKINGVAL"]),null!==g[t+"B2BKINGURL"]&&(e.find(".b2bking_bulkorder_form_container_content_line_product").addClass("b2bking_bulkorder_form_container_content_line_product_url"),e.find(".b2bking_bulkorder_form_container_content_line_product").attr("data-url",g[t+"B2BKINGURL"]))}})),1!==parseInt(b2bking_display_settings.quotes_enabled)&&x()})),t("body").on("click",".b2bking_bulkorder_clear",(function(){let n=t(this).parent();c=n;let e=n.find(".b2bking_bulkorder_form_container_content_line_product"),i=n.find(".b2bking_bulkorder_form_container_content_line_qty");e.prop("disabled",!1),e.prop("readonly",!1),i.removeAttr("max"),i.removeAttr("min"),i.removeAttr("step"),e.removeAttr("style"),e.val(""),i.val("");var _=e.attr("class").split(/\s+/);t.each(_,(function(t,n){n.includes("b2bking_selected_product_id_")&&e.removeClass(n)})),1!==parseInt(b2bking_display_settings.quotes_enabled)&&x(),t(n).find(".b2bking_bulkorder_form_container_content_line_product_url").removeAttr("data-url"),t(n).find(".b2bking_bulkorder_form_container_content_line_product_url").removeClass("b2bking_bulkorder_form_container_content_line_product_url"),t(this).remove()})),t(".b2bking_bulkorder_form_container_bottom_add_button").on("click",(function(){let n="",e=t(this).val();if(document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach((function(e){var i=t(e).attr("class").split(/\s+/);t.each(i,(function(i,_){if(_.includes("b2bking_selected_product_id_")){let i=_.split("_")[4],r=t(e).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();r>0&&(n+=i+":"+r+"|")}}))})),""!==n){t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_add_button_icon"),t(".b2bking_bulkorder_form_container_bottom_add_button_icon").remove();var i={action:"b2bking_bulkorder_add_cart",security:b2bking_display_settings.security,productstring:n,listval:e};t.post(b2bking_display_settings.ajaxurl,i,(function(n){if(1===parseInt(b2bking_display_settings.redirect_cart_add_cart_classic_form))window.location=b2bking_display_settings.carturl;else{let n='<svg class="b2bking_bulkorder_form_container_bottom_add_button_icon" xmlns="http://www.w3.org/2000/svg" width="21" height="19" fill="none" viewBox="0 0 21 19"><path fill="#fff" d="M18.401 11.875H7.714l.238 1.188h9.786c.562 0 .978.53.854 1.087l-.202.901a2.082 2.082 0 011.152 1.87c0 1.159-.93 2.096-2.072 2.079-1.087-.016-1.981-.914-2.01-2.02a2.091 2.091 0 01.612-1.543H8.428c.379.378.614.903.614 1.485 0 1.18-.967 2.131-2.14 2.076-1.04-.05-1.886-.905-1.94-1.964a2.085 2.085 0 011.022-1.914L3.423 2.375H.875A.883.883 0 010 1.485V.89C0 .399.392 0 .875 0h3.738c.416 0 .774.298.857.712l.334 1.663h14.32c.562 0 .978.53.854 1.088l-1.724 7.719a.878.878 0 01-.853.693zm-3.526-5.64h-1.75V4.75a.589.589 0 00-.583-.594h-.584a.589.589 0 00-.583.594v1.484h-1.75a.589.589 0 00-.583.594v.594c0 .328.26.594.583.594h1.75V9.5c0 .328.261.594.583.594h.584a.589.589 0 00.583-.594V8.016h1.75a.589.589 0 00.583-.594v-.594a.589.589 0 00-.583-.594z"></path></svg>';t(".b2bking_bulkorder_form_container_bottom_add_button").html(n+b2bking_display_settings.added_cart),t(document.body).trigger("wc_fragment_refresh")}}))}})),t("body").on("input",".b2bking_bulkorder_form_container_content_line_qty",(function(){var n=parseInt(t(this).attr("max")),e=t(this).parent().find(".b2bking_bulkorder_form_container_content_line_product"),i=t(e).attr("class"),_="";void 0===i&&(e=t(this).parent().parent().parent().find(".b2bking_bulkorder_form_container_content_line_product"),i=t(e).attr("class"),_="cream");var r=0,o=i.split(/\s+/);t.each(o,(function(t,n){n.includes("b2bking_selected_product_id_")&&(r=n.split("_")[4])}));let a=t(this).val();var s=0;if(void 0!==b2bking_display_settings.cart_quantities[r]&&(s=parseInt(b2bking_display_settings.cart_quantities[r]),a=parseInt(a)+s),0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(s=parseInt(b2bking_display_settings.cart_quantities_cartqty),a=parseInt(a)+s),a>n){t(this).val(n-s);let e=t(this).parent(),i=b2bking_display_settings.max_items_stock;if(i=i.replace("%s",n),e.find(".b2bking_bulkorder_form_container_content_line_product").val()!==i){let t=e.find(".b2bking_bulkorder_form_container_content_line_product").val(),n=e.find(".b2bking_bulkorder_form_container_content_line_product").css("color");e.find(".b2bking_bulkorder_form_container_content_line_product").val(i),e.find(".b2bking_bulkorder_form_container_content_line_product").css("color","rgb(194 25 25)"),setTimeout((function(){e.find(".b2bking_bulkorder_form_container_content_line_product").val(t),e.find(".b2bking_bulkorder_form_container_content_line_product").css("color",n)}),1200)}}c=t(this).parent(),"cream"===_&&(c=t(this).parent().parent().parent()),1!==parseInt(b2bking_display_settings.quotes_enabled)&&x()})),void 0!==n){function I(n,e,i,_){if(9875678===n)t(e).addClass("b2bking_none_in_stock"),t(e).html(b2bking_display_settings.already_in_cart),t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(0),t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",0);else if(n>=i&&0!==i){var r={action:"b2bking_bulkorder_add_cart_item",security:b2bking_display_settings.security,productid:_,productqty:i},o=[];jQuery(".variation_"+_).each((function(n){o.push(t(this).attr("id")+"="+t(this).val())})),r.attributes=o,B(r,e,i,n)}else 0===n?(t(e).addClass("b2bking_none_in_stock"),t(e).html("0 "+b2bking_display_settings.left_in_stock),t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(0),t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",0)):(t(e).html(b2bking_display_settings.left_in_stock_low_left+n+b2bking_display_settings.left_in_stock_low_right),t(e).addClass("b2bking_low_in_stock"),t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(n),setTimeout((function(){t(e).removeClass("b2bking_low_in_stock"),t(e).html(b2bking_display_settings.add_to_cart)}),2500))}function B(n,e,i,_){"yes"===v?(v="no",t.post(b2bking_display_settings.ajaxurl,n,(function(n){if("success"===n){t(e).removeClass("b2bking_low_in_stock"),t(e).removeClass("b2bking_none_in_stock"),t(document.body).trigger("wc_fragment_refresh");let n=parseInt(t(e).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text()),r=parseInt(i)+n;if(t(e).parent().parent().parent().find(".b2bking_cream_product_nr_icon").text(r),t(e).parent().parent().parent().find(".b2bking_cream_product_nr_icon").removeClass("b2bking_cream_product_nr_icon_hidden"),"cart"===b2bking_display_settings.cream_form_cart_button){let n=parseInt(t("#b2bking_bulkorder_cream_filter_cart_text").text()),e=parseInt(i)+n;t("#b2bking_bulkorder_cream_filter_cart_text").text(e),t(".b2bking_orderform_cart").removeClass("b2bking_orderform_cart_inactive")}"checkout"===b2bking_display_settings.cream_form_cart_button&&t(".b2bking_orderform_checkout").removeClass("b2bking_orderform_checkout_inactive");let o=_-i;o>0?(t(e).html(b2bking_display_settings.add_more_indigo),t(e).addClass("b2bking_add_more_button"),o<i&&t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(o)):(t(e).addClass("b2bking_none_in_stock"),t(e).html("0 "+b2bking_display_settings.left_in_stock),t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val(0),t(e).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",0)),t(document.body).trigger("b2bking_added_item_cart"),setTimeout((function(){v="yes"}),500)}}))):setTimeout((function(){B(n,e,i,_)}),100)}document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach((function(n){let e=t(n).val().split(" (")[0];var i={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:e,searchType:"purchaseListLoading",dataType:"json"};t.post(b2bking_display_settings.ajaxurl,i,(function(t){let n=t;if('"empty"'!==n){let t=JSON.parse(n);Object.keys(t).forEach((function(n){n.includes("B2BKINGPRICE")?l[n]=t[n]:n.includes("B2BTIERPRICE")?u[n]=t[n]:n.includes("B2BKINGSTOCK")?d[n]=t[n]:n.includes("B2BKINGMIN")?p[n]=t[n]:n.includes("B2BKINGMAX")?f[n]=t[n]:n.includes("B2BKINGSTEP")?m[n]=t[n]:n.includes("B2BKINGVAL")&&(y[n]=t[n])}))}}));var _=0,r=t(n).attr("class").split(/\s+/);t.each(r,(function(t,n){n.includes("b2bking_selected_product_id_")&&(_=n.split("_")[4])})),null!==d[_+"B2BKINGSTOCK"]&&t(n).parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",d[_+"B2BKINGSTOCK"]),c=t(n).parent(),1!==parseInt(b2bking_display_settings.quotes_enabled)&&x()})),t("body").on("click",".b2bking_cream_input_plus_button",(function(){let n=t(this).parent().find("input");n[0].stepUp(1),t(n).trigger("input")})),t("body").on("click",".b2bking_cream_input_minus_button",(function(){let n=t(this).parent().find("input");n[0].stepDown(1),t(n).trigger("input")})),t("body").on("click",".b2bking_bulkorder_indigo_add",(function(){if(t(this).hasClass("configure")){let n=t(this).parent().parent().parent().find(".b2bking_bulkorder_indigo_product_container a").attr("href");return void window.open(n,"_blank")}if(t(this).hasClass("b2bking_cream_view_options_button"))return;if(t(this).hasClass("b2bking_none_in_stock"))return;if(!t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty")[0].checkValidity())return void t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty")[0].reportValidity();let n=!1;if(jQuery(this).parent().parent().parent().find("select").each((function(t){jQuery(this)[0].checkValidity()||(jQuery(this)[0].reportValidity(),n=!0)})),n)return;let e=t(this);t(this).hasClass("b2bking_none_in_stock")||t(this).html('<img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'">');let i=t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_product");var _=t(i).attr("class");void 0===_&&(i=t(this).parent().parent().parent().find(".b2bking_bulkorder_form_container_content_line_product"),_=t(i).attr("class"));var r=0,o=_.split(/\s+/);t.each(o,(function(t,n){n.includes("b2bking_selected_product_id_")&&(r=n.split("_")[4])}));let a=t(this).parent().parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();var s={action:"b2bking_get_stock_quantity_addable",security:b2bking_display_settings.security,id:r},b=9999999;0===parseInt(b2bking_display_settings.b2bking_orderform_skip_stock_search)?t.post(b2bking_display_settings.ajaxurl,s,(function(t){I(b=parseInt(t),e,a,r)})):I(b,e,a,r)})),t("body").on("click",".b2bking_orderform_cart",(function(){var n=t(this).parent().parent().parent();t(n).find(".b2bking_orderform_cart").hasClass("b2bking_orderform_cart_inactive")||(window.location=b2bking_display_settings.carturl)})),t("body").on("click",".b2bking_orderform_checkout",(function(){var n=t(this).parent().parent().parent();t(n).find(".b2bking_orderform_checkout").hasClass("b2bking_orderform_checkout_inactive")||(window.location=b2bking_display_settings.checkouturl)})),t(".b2bking_bulkorder_search_text_indigo").not(".b2bking_bulkorder_search_text_cream").on("input",(function(){var n=t(this),e=t(n).parent().parent().parent();let i=Date.now();b=i,t(this).length>0&&(t(e).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_loader_indigo_content"><img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'"></div>'),setTimeout((function(){if(i===b||s){var _=t(e).find(".b2bking_bulkorder_exclude").val(),r=t(e).find(".b2bking_bulkorder_product_list").val(),o=t(e).find(".b2bking_bulkorder_category").val(),a=t(e).find(".b2bking_bulkorder_sortby").val(),c={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:t(n).val(),dataType:"json",theme:"indigo",exclude:_,productlist:r,sortby:a,category:o};t.post(b2bking_display_settings.ajaxurl,c,(function(n){let _=n,r="";if(i===b||s)if(1234!==parseInt(_)){let n=JSON.parse(_);Object.keys(n).forEach((function(t){t.includes("B2BKINGPRICE")?l[t]=n[t]:t.includes("B2BTIERPRICE")?u[t]=n[t]:t.includes("B2BKINGSTOCK")?d[t]=n[t]:t.includes("B2BKINGIMAGE")?k[t]=n[t]:t.includes("B2BKINGURL")?g[t]=n[t]:t.includes("B2BKINGMIN")?p[t]=n[t]:t.includes("B2BKINGMAX")?f[t]=n[t]:t.includes("B2BKINGSTEP")?m[t]=n[t]:t.includes("B2BKINGVAL")?y[t]=n[t]:t.includes("HTML")&&(r=n[t])})),t(e).find(".b2bking_bulkorder_form_container_content_indigo").html(r)}else t(e).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_bulkorder_indigo_noproducts">'+b2bking_display_settings.no_products_found+'</div><div class="b2bking_bulkorder_form_container_bottom b2bking_bulkorder_form_container_bottom_indigo"></div>')}))}}),400))})),t(".b2bking_orderform_filters").on("click",(function(){var n=t(this).parent().parent().parent();jQuery("#b2bking_bulkorder_cream_filter_icon_attributes img").attr("src")===b2bking_display_settings.filters_close&&t(".b2bking_orderform_attributes").click(),t(n).find(".b2bking_bulkorder_form_cream_main_container").hasClass("b2bking_filters_open")?(t(n).find("#b2bking_bulkorder_cream_filter_icon img").attr("src",b2bking_display_settings.filters),t(n).find(".b2bking_orderform_filters").css("background","#fff"),t(n).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_open, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_open, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_open").addClass("b2bking_filters_closed").removeClass("b2bking_filters_open")):(t(n).find("#b2bking_bulkorder_cream_filter_icon img").attr("src",b2bking_display_settings.filters_close),t(n).find(".b2bking_orderform_filters").css("background","#f3f3f3"),t(n).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_closed, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_closed, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_closed").addClass("b2bking_filters_open").removeClass("b2bking_filters_closed")),t(n).find(".b2bking_bulkorder_form_container_cream_filters_content_first").css("display",""),t(n).find(".b2bking_bulkorder_form_container_cream_filters_content_second").css("display","none")})),t(".b2bking_orderform_attributes").on("click",(function(){var n=t(this).parent().parent().parent();jQuery("#b2bking_bulkorder_cream_filter_icon img").attr("src")===b2bking_display_settings.filters_close&&t(".b2bking_orderform_filters").click(),t(n).find(".b2bking_bulkorder_form_cream_main_container").hasClass("b2bking_filters_open")?(t(n).find("#b2bking_bulkorder_cream_filter_icon_attributes img").attr("src",b2bking_display_settings.attributes),t(n).find(".b2bking_orderform_attributes").css("background","#fff"),t(n).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_open, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_open, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_open").addClass("b2bking_filters_closed").removeClass("b2bking_filters_open")):(t(n).find("#b2bking_bulkorder_cream_filter_icon_attributes img").attr("src",b2bking_display_settings.filters_close),t(n).find(".b2bking_orderform_attributes").css("background","#f3f3f3"),t(n).find(".b2bking_bulkorder_form_cream_main_container.b2bking_filters_closed, .b2bking_bulkorder_form_container_cream_filters.b2bking_filters_closed, .b2bking_bulkorder_form_cream_main_container_content.b2bking_filters_closed").addClass("b2bking_filters_open").removeClass("b2bking_filters_closed")),t(n).find(".b2bking_bulkorder_form_container_cream_filters_content_first").css("display","none"),t(n).find(".b2bking_bulkorder_form_container_cream_filters_content_second").css("display","")})),t(".b2bking_bulkorder_search_text_cream").on("input",(function(){var n=t(this).parent().parent().parent().parent();0!==t(this).val().length?(t(n).find(".b2bking_bulkorder_cream_search_icon_clear").removeClass("b2bking_bulkorder_cream_search_icon_hide").addClass("b2bking_bulkorder_cream_search_icon_show"),t(n).find(".b2bking_bulkorder_cream_search_icon_search").removeClass("b2bking_bulkorder_cream_search_icon_show").addClass("b2bking_bulkorder_cream_search_icon_hide")):(t(n).find(".b2bking_bulkorder_cream_search_icon_clear").removeClass("b2bking_bulkorder_cream_search_icon_show").addClass("b2bking_bulkorder_cream_search_icon_hide"),t(n).find(".b2bking_bulkorder_cream_search_icon_search").removeClass("b2bking_bulkorder_cream_search_icon_hide").addClass("b2bking_bulkorder_cream_search_icon_show"))})),t(".b2bking_bulkorder_cream_search_icon_clear").on("click",(function(){var n=t(this).parent().parent().parent().parent();t(n).find(".b2bking_bulkorder_search_text_cream").val(""),t(n).find(".b2bking_bulkorder_search_text_cream").trigger("input"),t(n).find(".b2bking_bulkorder_search_text_cream").focus()})),t(".b2bking_bulkorder_filters_list_attributes li").on("click",(function(){let n=t(this).val();var e=t(this).parent().parent().parent().parent().parent().parent(),i=t(this).parent();t(i).find(".b2bking_attribute_value").val(n),t(e).find(".b2bking_bulkorder_search_text_indigo").trigger("input"),t(this).parent().find("li").each((function(n){t(this).css("text-decoration","none")})),t(this).css("text-decoration","underline")})),t(".b2bking_bulkorder_filters_list li").on("click",(function(){let n=t(this).val();var e=t(this).parent().parent().parent().parent().parent().parent();t(e).find(".b2bking_bulkorder_category").val(n),t(e).find(".b2bking_bulkorder_search_text_indigo").trigger("input"),t(e).find(".b2bking_bulkorder_filters_list li").each((function(n){t(this).css("text-decoration","none")})),t(this).css("text-decoration","underline")})),t(".b2bking_bulkorder_filters_list_sortby li").on("click",(function(){var n=t(this).parent().parent().parent().parent().parent().parent();let e=t(this).attr("value");t(n).find(".b2bking_bulkorder_sortby").attr("value",e),t(n).find(".b2bking_bulkorder_search_text_indigo").trigger("input"),t(n).find(".b2bking_bulkorder_filters_list_sortby li").each((function(n){t(this).css("text-decoration","none")})),t(this).css("text-decoration","underline")})),t(".b2bking_bulkorder_search_text_indigo.b2bking_bulkorder_search_text_cream").on("input",(function(){let n=Date.now();var e=t(this),i=t(e).parent().parent().parent().parent();b=n,t(this).length>0&&(t(i).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_loader_indigo_content b2bking_loader_cream_content"><div class="b2bking_loading_products_wrapper"><div class="b2bking_loading_products_text">'+b2bking_display_settings.loading_products_text+'</div><img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'"></div></div>'),setTimeout((function(){if(n===b||s){var _=t(i).find(".b2bking_bulkorder_exclude").val(),r=t(i).find(".b2bking_bulkorder_product_list").val(),o=t(i).find(".b2bking_bulkorder_category").val(),a=t(i).find(".b2bking_bulkorder_sortby").val(),c=t(i).find(".b2bking_bulkorder_attributes").val(),v=c.split(","),h={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:t(e).val(),dataType:"json",theme:"cream",sku:t(i).find(".b2bking_order_form_show_sku").val(),stock:t(i).find(".b2bking_order_form_show_stock").val(),exclude:_,productlist:r,category:o,attributes:c,sortby:a};v.forEach((function(n){n=n.trim(),h["attr_"+n]=t(".b2bking_attribute_value_"+n).val()})),t.post(b2bking_display_settings.ajaxurl,h,(function(e){let _=e,r="";if(n===b||s)if(1234!==parseInt(_)){let n=JSON.parse(_);Object.keys(n).forEach((function(t){t.includes("B2BKINGPRICE")?l[t]=n[t]:t.includes("B2BTIERPRICE")?u[t]=n[t]:t.includes("B2BKINGSTOCK")?d[t]=n[t]:t.includes("B2BKINGIMAGE")?k[t]=n[t]:t.includes("B2BKINGURL")?g[t]=n[t]:t.includes("B2BKINGMIN")?p[t]=n[t]:t.includes("B2BKINGMAX")?f[t]=n[t]:t.includes("B2BKINGSTEP")?m[t]=n[t]:t.includes("B2BKINGVAL")?y[t]=n[t]:t.includes("HTML")&&(r=n[t])})),t(i).find(".b2bking_bulkorder_form_container_content_indigo").html(r)}else t(i).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_bulkorder_indigo_noproducts b2bking_bulkorder_cream_noproducts"><img class="b2bking_bulkorder_cream_noproducts_img" src="'+b2bking_display_settings.no_products_found_img+'"><div class="b2bking_cream_noproductsfound_text">'+b2bking_display_settings.no_products_found+'</div></div><div class="b2bking_bulkorder_form_container_bottom b2bking_bulkorder_form_container_bottom_indigo b2bking_bulkorder_form_container_bottom_cream"></div>')}))}}),400))}))}function q(n="no"){if(t(".b2bking_has_color").removeClass("b2bking_has_color"),void 0!==t(".b2bking_shop_table").attr("class")){var e=t(".b2bking_shop_table").attr("class").split(/\s+/),i=0;if(t.each(e,(function(t,n){n.includes("b2bking_productid_")&&(i=parseInt(n.split("_")[2]))})),void 0!==t("input[name=quantity]").val())var _=parseInt(t("input[name=quantity]").val());else if(void 0!==t("select[name=quantity]").val())_=parseInt(t("select[name=quantity]").val());if("no"!==n)if(void 0!==_)_=parseInt(n);else _=parseInt(n);var r=0;1===parseInt(b2bking_display_settings.add_cart_quantity_tiered_table)&&(void 0!==b2bking_display_settings.cart_quantities[i]&&(r=parseInt(b2bking_display_settings.cart_quantities[i])),0!==parseInt(b2bking_display_settings.cart_quantities_cartqty)&&(r=parseInt(b2bking_display_settings.cart_quantities_cartqty)));var o=_+r;if(t(".b2bking_tiered_active_price").text(t(".summary .b2bking_tiered_range_replaced:first").text().split(" – ")[1]),void 0===t(".summary .b2bking_tiered_range_replaced:first").text().split(" – ")[1]&&t(".b2bking_tiered_active_price").text(t(".b2bking_tiered_range_replaced:first").text().split(" – ")[1]),0!==parseInt(b2bking_display_settings.productid)){var a=jQuery(".b2bking_tiered_price_range_replaced_"+b2bking_display_settings.productid+":first").text();""!==a&&t(".b2bking_tiered_active_price").text(a.split(" – ")[1])}let s=t(".b2bking_tiered_range_original_price").val()*_;t.isNumeric(s)||(s=0),t(".b2bking_tiered_total_price").text(s.toFixed(2)+" "+b2bking_display_settings.currency_symbol),t(".b2bking_shop_table.b2bking_productid_"+i+" tr td:nth-child(1)").each((function(){let n=t(this).data("range"),e=n.split(" - ");if(2===e.length){let n=parseInt(e[0]),i=parseInt(e[1]);if(o>=n&&o<=i)if(t(this).parent().find("td").addClass("b2bking_has_color"),1===parseInt(b2bking_display_settings.is_enabled_discount_table)){t(".b2bking_tiered_active_price").text(t(this).parent().find("td:nth-child(3)").text());let n=t(this).parent().find("td:nth-child(3) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").text(n.toFixed(2)+" "+b2bking_display_settings.currency_symbol)}else{t(".b2bking_tiered_active_price").text(t(this).parent().find("td:nth-child(2)").text());let n=t(this).parent().find("td:nth-child(2) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").text(n.toFixed(2)+" "+b2bking_display_settings.currency_symbol)}}else if(n.includes("+")){let e=parseInt(n.split("+")[0]);if(o>=e)if(t(this).parent().find("td").addClass("b2bking_has_color"),1===parseInt(b2bking_display_settings.is_enabled_discount_table)){t(".b2bking_tiered_active_price").text(t(this).parent().find("td:nth-child(3)").text());let n=t(this).parent().find("td:nth-child(3) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").text(n.toFixed(2)+" "+b2bking_display_settings.currency_symbol)}else{t(".b2bking_tiered_active_price").text(t(this).parent().find("td:nth-child(2)").text());let n=t(this).parent().find("td:nth-child(2) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").text(n.toFixed(2)+" "+b2bking_display_settings.currency_symbol)}}else if(o===parseInt(n))if(t(this).parent().find("td").addClass("b2bking_has_color"),1===parseInt(b2bking_display_settings.is_enabled_discount_table)){t(".b2bking_tiered_active_price").text(t(this).parent().find("td:nth-child(3)").text());let n=t(this).parent().find("td:nth-child(3) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").text(n.toFixed(2)+" "+b2bking_display_settings.currency_symbol)}else{t(".b2bking_tiered_active_price").text(t(this).parent().find("td:nth-child(2)").text());let n=t(this).parent().find("td:nth-child(2) .b2bking_hidden_tier_value").val()*_;t(".b2bking_tiered_total_price").text(n.toFixed(2)+" "+b2bking_display_settings.currency_symbol)}})),t(document.body).trigger("b2bking_set_hover_finish")}}function w(){t("#createaccount").prop("checked")||void 0===t("#createaccount").prop("checked")?(t("#b2bking_checkout_registration_main_container_fields, .b2bking_registration_roles_dropdown_section").css("display","block"),t(".b2bking_custom_field_req_required").prop("required","true")):(t("#b2bking_checkout_registration_main_container_fields, .b2bking_registration_roles_dropdown_section").css("display","none"),t(".b2bking_custom_field_req_required").removeAttr("required"))}jQuery("body").on("click",".b2bking_bulkorder_pagination_button",(function(){window.scrollTo(0,0)})),t("body").on("click",".b2bking_bulkorder_pagination_button",(function(){var n=t(this).parent().parent().parent().parent().parent().parent(),e=t(n).find(".b2bking_bulkorder_attributes").val(),i=e.split(","),_={action:"b2bking_ajax_search",security:b2bking_display_settings.security,dataType:"json",theme:b2bking_pagination_theme,sku:t(n).find(".b2bking_order_form_show_sku").val(),stock:t(n).find(".b2bking_order_form_show_stock").val(),searchValue:"",sortby:t(n).find(".b2bking_bulkorder_sortby").val(),paginationdata:b2bking_pagination_data,pagerequested:t(this).val(),category:t(n).find(".b2bking_bulkorder_category").val(),productlist:t(n).find(".b2bking_bulkorder_product_list").val(),exclude:t(n).find(".b2bking_bulkorder_exclude").val(),attributes:e};i.forEach((function(n){_["attr_"+n]=t(".b2bking_attribute_value_"+n).val()})),t(n).find(".b2bking_bulkorder_form_container_content_indigo").html('<div class="b2bking_loader_indigo_content b2bking_loader_cream_content"><img class="b2bking_loader_icon_button_indigo" src="'+b2bking_display_settings.loadertransparenturl+'"></div>'),t.post(b2bking_display_settings.ajaxurl,_,(function(e){let i=e,_="";if(1234!==parseInt(i)){let e=JSON.parse(i);Object.keys(e).forEach((function(t){t.includes("B2BKINGPRICE")?l[t]=e[t]:t.includes("B2BTIERPRICE")?u[t]=e[t]:t.includes("B2BKINGSTOCK")?d[t]=e[t]:t.includes("B2BKINGIMAGE")?k[t]=e[t]:t.includes("B2BKINGURL")?g[t]=e[t]:t.includes("B2BKINGMIN")?p[t]=e[t]:t.includes("B2BKINGMAX")?f[t]=e[t]:t.includes("B2BKINGSTEP")?m[t]=e[t]:t.includes("B2BKINGVAL")?y[t]=e[t]:t.includes("HTML")&&(_=e[t])})),t(n).find(".b2bking_bulkorder_form_container_content_indigo").html(_)}}))})),t("body").on("click",".b2bking_cream_view_options_button",(function(){let n=t(this).val();t(this).hasClass("b2bking_cream_view_options_button_view")?(t(".b2bking_bulkorder_form_container_content_line_cream_"+n).removeClass("b2bking_bulkorder_form_container_content_line_cream_hidden").addClass("b2bking_cream_line_variation_colored"),t(this).removeClass("b2bking_cream_view_options_button_view"),t(this).addClass("b2bking_cream_view_options_button_hide"),t(this).find(".b2bking_cream_view_options_text").removeClass("b2bking_text_active").addClass("b2bking_text_inactive"),t(this).find(".b2bking_cream_hide_options_text").removeClass("b2bking_text_inactive").addClass("b2bking_text_active"),t(this).parent().parent().parent().addClass("b2bking_cream_view_options_button_hide"),t(this).parent().parent().parent().removeClass("b2bking_cream_view_options_button_view")):t(this).hasClass("b2bking_cream_view_options_button_hide")&&(t(".b2bking_bulkorder_form_container_content_line_cream_"+n).addClass("b2bking_bulkorder_form_container_content_line_cream_hidden"),t(this).addClass("b2bking_cream_view_options_button_view"),t(this).removeClass("b2bking_cream_view_options_button_hide"),t(this).find(".b2bking_cream_view_options_text").addClass("b2bking_text_active").removeClass("b2bking_text_inactive"),t(this).find(".b2bking_cream_hide_options_text").addClass("b2bking_text_inactive").removeClass("b2bking_text_active"),t(this).parent().parent().parent().addClass("b2bking_cream_view_options_button_view"),t(this).parent().parent().parent().removeClass("b2bking_cream_view_options_button_hide"))})),t("body").on("click",".b2bking_bulkorder_back_top",(function(){t("html, body").animate({scrollTop:0},"slow")})),jQuery(".b2bking_bulkorder_search_text_indigo").trigger("input"),t("body").on("click",".b2bking_subaccounts_account_button_login",(function(){var n=t(this).val(),e={action:"b2bkingloginsubaccount",security:b2bking_display_settings.security,customer:n};t.post(b2bking_display_settings.ajaxurl,e,(function(t){window.location=b2bking_display_settings.shopurl}))})),t("#b2bking_return_agent").on("click",(function(){var n=t(this).val(),e=t("#b2bking_return_agent_registered").val(),i={action:"b2bkingswitchtoagent",security:b2bking_display_settings.security,agent:n,agentdate:e};t.post(b2bking_display_settings.ajaxurl,i,(function(t){window.location=b2bking_display_settings.subaccountsurl}))})),t("body").on("click",".b2bking_bulkorder_form_container_content_line_product",(function(){let n=t(this).attr("data-url");void 0!==n&&n.length>0&&window.open(n,"_blank")})),t(".b2bking_download_list_button").on("click",(function(){var n=t(this).attr("class").split(/\s+/);t.each(n,(function(t,n){if(n.includes("id_")){let t=n.split("_")[1];window.location=b2bking_display_settings.ajaxurl+"?action=b2bkingdownloadpurchaselist&list="+t+"&security="+b2bking_display_settings.security}}))})),"function"==typeof t("#b2bking_purchase_lists_table").DataTable&&t("#b2bking_purchase_lists_table").dataTable({language:{url:b2bking_display_settings.datatables_folder+b2bking_display_settings.purchase_lists_language_option+".json"}}),t(".b2bking_bulkorder_form_container_bottom_delete_button").on("click",(function(){if(confirm(b2bking_display_settings.are_you_sure_delete_list)){let e=t(this).val();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_delete_button_icon"),t(".b2bking_bulkorder_form_container_bottom_delete_button_icon").remove();var n={action:"b2bking_purchase_list_delete",security:b2bking_display_settings.security,listid:e};t.post(b2bking_display_settings.ajaxurl,n,(function(t){window.location=b2bking_display_settings.purchaselistsurl}))}})),t(".b2bking_bulkorder_form_container_bottom_update_button").on("click",(function(){let n=t(this).val(),e="";if(document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach((function(n){var i=t(n).attr("class").split(/\s+/);t.each(i,(function(i,_){if(_.includes("b2bking_selected_product_id_")){let i=_.split("_")[4],r=t(n).parent().find(".b2bking_bulkorder_form_container_content_line_qty").val();(r>0||1===parseInt(b2bking_display_settings.lists_zero_qty))&&(e+=i+":"+r+"|")}}))})),""!==e){t(".b2bking_bulkorder_form_container_bottom_update_button").html();t('<img class="b2bking_loader_icon_button" src="'+b2bking_display_settings.loadertransparenturl+'">').insertBefore(".b2bking_bulkorder_form_container_bottom_update_button_icon"),t(".b2bking_bulkorder_form_container_bottom_update_button_icon").remove();var i={action:"b2bking_purchase_list_update",security:b2bking_display_settings.security,productstring:e,listid:n};t.post(b2bking_display_settings.ajaxurl,i,(function(t){location.reload()}))}})),void 0!==t("#b2bking_purchase_list_page").val()&&(t(".b2bking_bulkorder_form_container_content_line_product").css("color",b2bking_display_settings.colorsetting),t(".b2bking_bulkorder_form_container_content_line_product").css("font-weight","bold"),document.querySelectorAll(".b2bking_bulkorder_form_container_content_line_product").forEach((function(n){let e=t(n).val().split(" (")[0];var i={action:"b2bking_ajax_search",security:b2bking_display_settings.security,searchValue:e,searchType:"purchaseListLoading",dataType:"json"};t.post(b2bking_display_settings.ajaxurl,i,(function(e){let i=e;if('"empty"'!==i){let t=JSON.parse(i);Object.keys(t).forEach((function(n){n.includes("B2BKINGPRICE")?l[n]=t[n]:n.includes("B2BTIERPRICE")?u[n]=t[n]:n.includes("B2BKINGSTOCK")?d[n]=t[n]:n.includes("B2BKINGMIN")?p[n]=t[n]:n.includes("B2BKINGMAX")?f[n]=t[n]:n.includes("B2BKINGSTEP")?m[n]=t[n]:n.includes("B2BKINGVAL")&&(y[n]=t[n])}))}var _=0,r=t(n).attr("class").split(/\s+/);t.each(r,(function(t,n){n.includes("b2bking_selected_product_id_")&&(_=n.split("_")[4])})),null!==d[_+"B2BKINGSTOCK"]&&t(n).parent().find(".b2bking_bulkorder_form_container_content_line_qty").attr("max",d[_+"B2BKINGSTOCK"]),c=t(n).parent(),1!==parseInt(b2bking_display_settings.quotes_enabled)&&x()}))}))),t("body").on("click",".b2bking_add_cart_to_purchase_list_button",(function(){let n=window.prompt(b2bking_display_settings.save_list_name,"");if(""!==n&&null!==n){var e={action:"b2bking_save_cart_to_purchase_list",security:b2bking_display_settings.security,title:n,dataType:"json"};t.post(b2bking_display_settings.ajaxurl,e,(function(n){t(".b2bking_add_cart_to_purchase_list_button").text(b2bking_display_settings.list_saved),t(".b2bking_add_cart_to_purchase_list_button").prop("disabled",!0)}))}})),setTimeout((function(){1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&q()}),200),t("body").on("input","input[name=quantity]",(function(){let n=t(this).val();1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&q(n)})),t("body").on("change","input[name=quantity]",(function(){let n=t(this).val();1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&q(n)})),t("body").on("change","select[name=quantity]",(function(){let n=t(this).val();1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&q(n)})),t("body").on("change",".variations select",(function(){1===parseInt(b2bking_display_settings.is_enabled_color_tiered)&&q()})),1===parseInt(b2bking_display_settings.table_is_clickable)&&jQuery("body").on("click",".b2bking_tiered_price_table tbody tr",(function(){var n=jQuery(this).find("td:nth-child(1)").data("range");let e=n.split(" - ");if(2===e.length)var i=parseInt(e[1]);else i=parseInt(n.split("+")[0]);var _=t("input[name=quantity]").attr("min"),r=t("input[name=quantity]").attr("max"),o=t("input[name=quantity]").attr("step");if(void 0!==r&&""!==r||(r=999999999),void 0!==_&&""!==_||(_=1),i=(i=i>parseFloat(r)?r:i)<parseFloat(_)?_:i,void 0!==o&&""!==o){let t=i%o,n=0,_=0;0!==parseInt(t)&&((i-t)%o==0?(n=t,_=o-n):(_=t,n=o-_),2===e.length?i-=n:i+=_)}t("input[name=quantity]").val(i),t("input[name=quantity]").trigger("input").trigger("change")})),1===parseInt(b2bking_display_settings.ischeckout)&&1!==parseInt(b2bking_display_settings.validate_vat_checkout)&&(w(),t("#createaccount").change(w)),document.querySelectorAll(".b2bking_both_prices_price.b2bking_b2b_price_price").forEach((function(n){var e=jQuery(n).val();if(void 0!==e&&0===parseInt(e.length)){var i=t(n).attr("class").split(/\s+/);t.each(i,(function(t,n){if(n.includes("b2bking_b2b_price_id_")){let t=n.split("_")[4];var e=jQuery(".b2bking_tiered_price_range_replaced_"+t).html();jQuery(".b2bking_tiered_price_range_replaced_"+t).remove(),jQuery(".b2bking_both_prices_price.b2bking_b2b_price_price.b2bking_b2b_price_id_"+t).html(e)}}))}})),t("body").on("show_variation",".single_variation_wrap",(function(t,n){var e=jQuery(this).parent().find("[name=quantity]");void 0!==n.step?e.attr("step",n.step).trigger("change"):e.attr("step",1).trigger("change");var i=parseFloat(e.val());if(i=isNaN(i)||(i=i>parseFloat(n.max_qty)?n.max_qty:i)<parseFloat(n.min_qty)?n.min_qty:i,void 0!==n.max_qty&&""!==n.max_qty||(n.max_qty=999999999),void 0!==n.step){let t=i%n.step,e=0,_=0;0!==parseInt(t)&&((i-t)%n.step==0?(e=t,_=n.step-e):(_=t,e=n.step-_),i=i+_<parseFloat(n.max_qty)?i+_:i-e)}e.val(i),e.attr("min",n.min_qty).trigger("change"),e.attr("max",n.max_qty).trigger("change")})),jQuery(document.body).on("added_to_cart",(function(){setTimeout((function(){jQuery(document.body).trigger("wc_fragment_refresh")}),25),setTimeout((function(){jQuery(document.body).trigger("wc_fragment_refresh")}),50),setTimeout((function(){jQuery(document.body).trigger("wc_fragment_refresh")}),100),setTimeout((function(){jQuery(document.body).trigger("wc_fragment_refresh")}),200)})),jQuery(".woocommerce-account .elementor-hidden .woocommerce").remove(),t("form#order_review").on("click",'input[name="payment_method"]',(function(){const n=b2bking_display_settings.orderid;t("#place_order").prop("disabled",!0);var e=t('input[name="payment_method"]:checked').val(),i=t(`label[for="payment_method_${e}"]`).text().replace(/[\t\n]+/g,"").trim();""!==b2bking_display_settings.paymentmethod&&(e=b2bking_display_settings.paymentmethod,i=t(`label[for="payment_method_${e}"]`).text().replace(/[\t\n]+/g,"").trim());const _={action:"b2bking_update_fees",security:b2bking_display_settings.security,payment_method:e,payment_method_title:i,order_id:n};b2bking_display_settings.paymentmethod="",t.post(b2bking_display_settings.ajaxurl,_,(function(n){t("#place_order").prop("disabled",!1),n&&n.fragments&&(t("#order_review").html(n.fragments),t(`input[name="payment_method"][value=${e}]`).prop("checked",!0),t(`.payment_method_${e}`).css("display","block"),t(`div.payment_box:not(".payment_method_${e}")`).filter(":visible").slideUp(0),t(document.body).trigger("updated_checkout"))}))}))}))}(jQuery);